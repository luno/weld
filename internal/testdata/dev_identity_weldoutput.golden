package devstate

// Code generated by weld. DO NOT EDIT.

import (
	"example/exchange"
	exchange_client_dev "example/exchange/client/dev"
	exchange_client_logical "example/exchange/client/logical"
	exchange_db "example/exchange/db"
	"example/external/mail"
	mail_mail "example/external/mail/mail"
	"example/identity/email"
	email_client_dev "example/identity/email/client/dev"
	email_client_logical "example/identity/email/client/logical"
	email_db "example/identity/email/db"
	identity_state "example/identity/state"
	"example/identity/users"
	users_client_dev "example/identity/users/client/dev"
	users_client_logical "example/identity/users/client/logical"
	users_db "example/identity/users/db"

	"github.com/luno/jettison/errors"
)

func MakeBackends() (identity_state.Backends, error) {
	var (
		b   backendsImpl
		err error
	)

	b.email, err = email_client_dev.Make(&b)
	if err != nil {
		return nil, errors.Wrap(err, "email client dev make")
	}

	b.emailDB, err = email_db.Connect()
	if err != nil {
		return nil, errors.Wrap(err, "email db connect")
	}

	b.exchange, err = exchange_client_dev.Make(&b)
	if err != nil {
		return nil, errors.Wrap(err, "exchange client dev make")
	}

	b.exchangeDB, err = exchange_db.Connect()
	if err != nil {
		return nil, errors.Wrap(err, "exchange db connect")
	}

	b.mailer, err = mail.New()
	if err != nil {
		return nil, errors.Wrap(err, "mail new")
	}

	b.mailerLegacy, err = mail_mail.New()
	if err != nil {
		return nil, errors.Wrap(err, "mail new")
	}

	b.users, err = users_client_dev.Make(&b)
	if err != nil {
		return nil, errors.Wrap(err, "users client dev make")
	}

	b.usersDB, err = users_db.Connect()
	if err != nil {
		return nil, errors.Wrap(err, "users db connect")
	}

	return &b, nil
}

type backendsImpl struct {
	email        email.Client
	emailDB      *email_db.EmailDB
	exchange     exchange.Client
	exchangeDB   *exchange_db.ExchangeDB
	mailer       *mail.Mailer
	mailerLegacy *mail_mail.MailerLegacy
	users        users.Client
	usersDB      *users_db.UsersDB
}

func (b *backendsImpl) Email() email.Client {
	return b.email
}

func (b *backendsImpl) EmailDB() *email_db.EmailDB {
	return b.emailDB
}

func (b *backendsImpl) Exchange() exchange.Client {
	return b.exchange
}

func (b *backendsImpl) ExchangeDB() *exchange_db.ExchangeDB {
	return b.exchangeDB
}

func (b *backendsImpl) Mailer() *mail.Mailer {
	return b.mailer
}

func (b *backendsImpl) MailerLegacy() *mail_mail.MailerLegacy {
	return b.mailerLegacy
}

func (b *backendsImpl) Users() users.Client {
	return b.users
}

func (b *backendsImpl) UsersDB() *users_db.UsersDB {
	return b.usersDB
}

// Transitive dependency interface assertions.
var (
	_ exchange_client_logical.Backends = (*backendsImpl)(nil)
	_ email_client_logical.Backends    = (*backendsImpl)(nil)
	_ users_client_logical.Backends    = (*backendsImpl)(nil)
)
